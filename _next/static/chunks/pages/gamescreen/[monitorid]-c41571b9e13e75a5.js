(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{1615:function(t,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gamescreen/[monitorid]",function(){return i(1990)}])},1990:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return h}});var n=i(5893),r=i(1163),s=i(7294),o=i(2237),a=i(1290);let u=t=>{let{monitorId:e}=t,i=Number(window.innerWidth),r=Number(window.innerHeight),[u,l]=(0,s.useState)([]),[h,d]=(0,s.useState)([]),[c,x]=(0,s.useState)([]),p=(0,s.useCallback)(async()=>{let t=await a.x.rooms.control.$get(),e=await a.x.rooms.gunPosition.$get(),i=await a.x.check.$get();f(i,e),l(t),d(e),x(i)},[]),f=(t,e)=>{t.map(t=>{e.map(e=>{let i=Math.sqrt((t.pos.x-e[0])**2+(t.pos.y-e[1])**2);i<t.radius+20&&(a.x.check.$post({body:t.id}),console.log("フロントhit",t.id))})})};return(0,s.useEffect)(()=>{let t=setInterval(p,50);return()=>{clearInterval(t)}},[p]),(0,n.jsx)(o.Hf,{width:i,height:r,children:(0,n.jsxs)(o.mh,{children:[(0,n.jsx)(o.UL,{stroke:"black",strokeWidth:1,x:0,y:0,width:i,height:r}),u.map((t,r)=>(0,n.jsx)(o.Cd,{x:t.pos.x-e*i,y:t.pos.y,width:50,height:50,fill:"red"},r)),h.map((t,r)=>(0,n.jsx)(o.Cd,{radius:10,x:t[0]-e*i,y:t[1],fill:"green"},r)),c.map((t,r)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsx)(o.Cd,{x:t.pos.x-e*i,y:t.pos.y-e*i,width:50,height:50,fill:"blue"},r),(0,n.jsx)(o.xv,{x:t.pos.x-e*i,y:t.pos.y,fontSize:15,fontFamily:"Arial",fill:"white",text:t.type.toString()})]},r))]})})},l=()=>{let t=(0,r.useRouter)(),{monitorid:e}=t.query,i=Number(e);return(0,n.jsx)(u,{monitorId:i})};var h=l}},function(t){t.O(0,[237,774,888,179],function(){return t(t.s=1615)}),_N_E=t.O()}]);