(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{1615:function(t,e,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gamescreen/[monitorid]",function(){return i(1990)}])},1990:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return x}});var n=i(5893),s=i(1163),r=i(7294),o=i(2237),a=i(1290);let l=t=>{let{monitorId:e}=t,i=Number(window.innerWidth),s=Number(window.innerHeight),[l,u]=(0,r.useState)([]),[x,c]=(0,r.useState)([]),[h,d]=(0,r.useState)([]),p=(0,r.useCallback)(async()=>{let t=await a.x.rooms.control.$get(),e=await a.x.rooms.gunPosition.$get(),i=await a.x.check.$get();f(i,e),u(t),c(e),d(i)},[]),f=(t,e)=>{t.map(t=>{e.map(e=>{let i=Math.sqrt((t.pos.x-e[0])**2+(t.pos.y-e[1])**2);i<t.radius+20&&(a.x.check.$post({body:t.id}),console.log("フロントhit",t.id))})})};return(0,r.useEffect)(()=>{let t=setInterval(p,50);return()=>{clearInterval(t)}},[p]),(0,n.jsx)(o.Hf,{width:i,height:s,children:(0,n.jsxs)(o.mh,{children:[(0,n.jsx)(o.UL,{stroke:"black",strokeWidth:1,x:0,y:0,width:i,height:s}),l.map((t,s)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Cd,{x:t.pos.x-e*i,y:t.pos.y,width:50,height:50,fill:"red"},s),(0,n.jsx)(o.xv,{x:t.pos.x-e*i-23,y:t.pos.y-45,fontSize:15,fontFamily:"Arial",fill:"black",text:t.name})]})),x.map((t,s)=>(0,n.jsx)(o.Cd,{radius:10,x:t[0]-e*i,y:t[1],fill:"green"},s)),h.map((t,s)=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(o.Cd,{x:t.pos.x-e*i,y:t.pos.y-e*i,width:50,height:50,fill:"blue"},s),(0,n.jsx)(o.xv,{x:t.pos.x-e*i,y:t.pos.y,fontSize:15,fontFamily:"Arial",cc:!0,text:t.type.toString()})]},s))]})})},u=()=>{let t=(0,s.useRouter)(),{monitorid:e}=t.query,i=Number(e);return(0,n.jsx)(l,{monitorId:i})};var x=u}},function(t){t.O(0,[237,774,888,179],function(){return t(t.s=1615)}),_N_E=t.O()}]);