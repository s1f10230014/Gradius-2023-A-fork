(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[837],{1615:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/gamescreen/[monitorid]",function(){return i(1990)}])},1990:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return c}});var s=i(5893),n=i(24),r=i(1163),o=i(5371),l=i(7294),a=i(2237),u=i(8239),h=i(1290);let d=e=>{let{monitorId:t}=e,i=Number(window.innerWidth),r=Number(window.innerHeight),[d,x]=(0,l.useState)([]),[c,p]=(0,l.useState)([]),[f,w]=(0,l.useState)([]),m=(0,l.useCallback)(async()=>{let e=await h.x.rooms.control.$get(),t=await h.x.rooms.gunPosition.$get(),i=await h.x.check.$get();g(i,t),x(e),p(t),w(i)},[]),g=(e,t)=>{e.map(e=>{t.map(t=>{let i=Math.sqrt((e.pos.x-t[0])**2+(e.pos.y-t[1])**2);i<e.radius+20&&(h.x.check.$post({body:e.id}),console.log("フロントhit",e.id))})})};(0,l.useEffect)(()=>{let e=setInterval(m,50);return()=>{clearInterval(e)}},[m,d]);let[y]=(0,n.KO)(o.L);return y?(0,s.jsx)(a.Hf,{width:i,height:r,children:(0,s.jsxs)(a.mh,{children:[(0,s.jsx)(a.UL,{stroke:"black",strokeWidth:1,x:0,y:0,width:i,height:r}),d.map((e,n)=>(0,s.jsx)(a.Cd,{x:e.pos.x-t*i,y:e.pos.y-t*i,width:50,height:50,fill:"red"},n)),c.map((e,n)=>(0,s.jsx)(a.Cd,{radius:10,x:e[0]-t*i,y:e[1]-t*i,fill:"green"},n)),f.map((e,n)=>(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(a.Cd,{x:e.pos.x-t*i,y:e.pos.y-t*i,width:50,height:50,fill:"blue"},n),(0,s.jsx)(a.xv,{x:e.pos.x-t*i,y:e.pos.y-t*i,fontSize:15,fontFamily:"Arial",fill:"white",text:e.type.toString()})]},n))]})}):(0,s.jsx)(u.g,{visible:!0})},x=()=>{let[e]=(0,n.KO)(o.L),t=(0,r.useRouter)(),i=Number(t.query);return(0,s.jsx)(d,{monitorId:i})};var c=x}},function(e){e.O(0,[237,774,888,179],function(){return e(e.s=1615)}),_N_E=e.O()}]);